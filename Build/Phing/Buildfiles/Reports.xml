<?xml version="1.0" encoding="UTF-8"?>
<project name="Reports">

	<target name="report-phpunit" depends="test-phpunit" description="Run unit tests (HTML output)">
		<delete dir="${project.reportsdir}/UnitTests" quiet="true"/>
		<delete dir="${project.reportsdir}/CodeCoverage" quiet="true"/>
		<mkdir dir="${project.reportsdir}/UnitTests" />
		<mkdir dir="${project.reportsdir}/CodeCoverage" />

		<phpunitreport infile="${project.reportsdir}/unittests.xml" format="frames" todir="${project.reportsdir}/UnitTests" styledir="${phing.styledir}"/>

		<!-- we need the class loader for the coverage report -->
		<adhoc><![CDATA[
		require_once('Packages/Framework/Testing/Scripts/Bootstrap.php');
		]]></adhoc>
		<coverage-report outfile="${project.reportsdir}/coverage.xml">
			<report todir="${project.reportsdir}/CodeCoverage" styledir="${phing.styledir}"/>
		</coverage-report>
	</target>

</project>
<?xml version="1.0"?>
<project name="Release">

	<taskdef name="setpackagesexternals" classname="SetPackagesExternalsTask" classpath="Build/Phing/Tasks"/>

	<target name="release" depends="release-tag" description="Release FLOW3 to SourceForge and flow3.typo3.org"/>

	<target name="release-tag" description="Tags the distribution with its current version number and its currently contained packages.">
		<fail unless="env.BUILD_NUMBER" message="You must set the environment variable BUILD_NUMBER for this task."/>
		<fail unless="env.RELEASE_VERSION" message="You must set the environment variable RELEASE_VERSION for this task."/>

		<svnlastrevision workingcopy="${project.basedir}" propertyname="release.workingcopyrevision"/>

		<setpackagesexternals packagespath="${project.basedir}/Packages/Framework" workingcopyrevision="${release.workingcopyrevision}" />

		<property name="svn.tagdistribution.tag" value="Foo"/>
		<phingcall target="svn-tagdistribution"/>

		<setpackagesexternals packagespath="${project.basedir}/Packages/Framework" workingcopyrevision="" />

	</target>

</project>